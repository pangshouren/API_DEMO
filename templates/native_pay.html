<!doctype html>
<html lang="en">
<head style="min-width: 150px">
    <meta charset="UTF-8">
    <meta name="description" content="A layout example with a side menu that hides on mobile, just like the Pure website.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ksher Native_Pay API</title>

{#    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-" crossorigin="anonymous">#}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/layouts/pure-min.css') }}"
        integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous">
{#    <link rel="stylesheet" href="{{ url_for('static', filename='js/menus-min.js') }}">#}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/layouts/side-menu.css') }}">

        <!--[if lte IE 8]>
            <link rel="stylesheet" href="css/layouts/side-menu-old-ie.css">
        <![endif]-->
        <!--[if gt IE 8]><!-->
{#            <link rel="stylesheet" href="css/layouts/side-menu.css">#}

        <!--<![endif]-->
<style>
.dropdown {
  position: relative;
  display: inline-block;
}
.dropdown-content {
  display: none;
  position: absolute;
  background-color: #f9f9f9;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  padding: 12px 16px;
}
.dropdown:hover .dropdown-content {
  display: block;
}
</style>

</head>
<body>

<div id="layout">
   <!-- Menu toggle -->
    <a href="#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>

    <div style="width: 200px">
        <div id = "menu" style="overflow: unset">
        <div class="pure-menu">
            <a href="/" class="pure-menu-heading">KsherPay APIs</a>
            <div class="pure-menu custom-restricted-width">
                <ul class="pure-menu-list">
                <li class="pure-menu-item">
                <li class="pure-menu-item pure-menu-has-children">
                    <a href="#" id="menuLink1" class="pure-menu-link" aria-haspopup="true">ðŸ”–Order Request</a>
                    <ul class="pure-menu-children">
                        <li class="pure-menu-item">
                            <a href="/native_pay" class="pure-menu-link">Ksher Native_Pay API ðŸ”—</a>
                        </li>
                        <li class="pure-menu-item">
                            <a href="/quick_pay" class="pure-menu-link">Ksher Quick_Pay API ðŸ”—</a>
                        </li>
                        <li class="pure-menu-item">
                            <a href="/jsapi_pay" class="pure-menu-link">Ksher Jsapi_Pay API ðŸ”—</a>
                        </li>
                        <li class="pure-menu-item">
                            <a href="/web_alipay" class="pure-menu-link">Ksher Web_Alipay API ðŸ”—</a>
                        </li>
                        <li class="pure-menu-item">
                            <a href="/wap_alipay" class="pure-menu-link">Ksher Wap_Alipay API ðŸ”—</a>
                        </li>
                        <li class="pure-menu-item">
                            <a href="/app_pay" class="pure-menu-link">Ksher APP_Pay API ðŸ”—</a>
                        </li>
                        <li class="pure-menu-item">
                            <a href="/minipro_pay" class="pure-menu-link">Ksher Miniprogram_Pay API ðŸ”—</a>
                        </li>
                    </ul>
                </li>

                <li class="pure-menu-item"><a href="/order_query" class="pure-menu-link">Order Query</a></li>
                <li class="pure-menu-item"><a href="/order_close" class="pure-menu-link">Order Close</a></li>
                <li class="pure-menu-item"><a href="/order_refund" class="pure-menu-link">Order Refund</a></li>
                <li class="pure-menu-item"><a href="/refund_query" class="pure-menu-link">Refund Query</a></li>
                <li class="pure-menu-item"><a href="/rate_query" class="pure-menu-link">Rate Query</a></li>
                <li class="pure-menu-item"><a href="pay_notify" class="pure-menu-link">Pay Notify</a></li>
                <li class="pure-menu-item"><a href="/error_codes" class="pure-menu-link">ERROR CODES</a></li>

            </ul>
            </div>

        </div>
    </div>
    </div>










    <div id = "main" >
        <div class="header">
            <h3>Ksher Native_Pay API Documentation</h3>

        </div>

        <div class="content">
            <h3>Overview</h3>
            <p>This document describes how merchant or software company use Ksher Nativepay API. The target readers are R&D engineers, architects
                and other related integration engineers.</p>
            <h3>Applicable Cases</h3>
            <p>Ksher Native_Pay is applicable for the website online payment, merchant system calls ordering API and generates a QR Code according to the goods in the consumer's cart, the consumer use wechat to scan this QR Code to finish the payment.</p>
            <h3>Payment Flow</h3>
            <img src="/static/nativepayflow.jpg" height="600" width="700">
            <h3>Ksher Native_Pay Request url</h3>
            <p> https://api.mch.ksher.net/KsherPay/native_pay </p>
            <h3> Request Method</h3>
            <p> Post </p>
            <h3>Request Format</h3>
            <p>application/x-www-form-urlencoded</p>
            <h3>Ksher Native_Pay Order Request</h3>
            <h4>- Request Parameters</h4>
            <table class="pure-table" width="60">
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Type</th>
                        <th>Required</th>
                        <th>Value Example</th>
                        <th>Description</th>
                    </tr>
                </thead>

                <tbody>
                    <tr class="pure-table-odd">
                        <td>appid</td>
                        <td>String(32)</td>
                        <td>YES</td>
                        <td>mch20163  </td>
                        <td>appid is the merchant ID that authorised by Ksher</td>
                    </tr>

                    <tr>
                        <td>nonce_str</td>
                        <td>String(32)</td>
                        <td>YES</td>
                        <td>"sQ8gfSpeeV5Ld8ulW9q7JxUnXSOiZ90Y"</td>
                        <td>Random string</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>channel</td>
                        <td>String(32)</td>
                        <td>YES</td>
                        <td>wechat</td>
                        <td>Value range: wechat /alipay /bbl_promptpay</td>
                    </tr>

                    <tr>
                        <td>sign</td>
                        <td>String(256)</td>
                        <td>YES</td>
                        <td> </td>
                        <td>refer to following relevant chapter for signature algorithm</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>mch_order_no</td>
                        <td>String(32)</td>
                        <td>YES</td>
                        <td> </td>
                        <td>generated by merchant self, it must be unique on the merchant side.</td>
                    </tr>

                    <tr>
                        <td>total_fee</td>
                        <td>Int</td>
                        <td>YES</td>
                        <td>100</td>
                        <td>total amount of the order and it must be an integer, the unit is cent.</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>fee_type</td>
                        <td>String(16)</td>
                        <td>YES</td>
                        <td>CNY</td>
                        <td>comply with ISO 4217, 3 characters </td>
                    </tr>

                    <tr>
                        <td>notify_url</td>
                        <td>String(256)</td>
                        <td>YES</td>
                        <td>http://www.myweb.com/wepay/pay_notify</td>
                        <td>the url to receive the asynchronous notification about the status of the payment from Ksher; If merchant leaves this field blank, then there will be no notification to send back to merchant.</td>
                    </tr>
                    <tr class="pure-table-odd">
                        <td>img_type</td>
                        <td>String(3)</td>
                        <td>NO</td>
                        <td>png </td>
                        <td>Ksher system can generate two types of the qrcode image: png, svg, the default is png</td>
                    </tr>

                    <tr>
                        <td>product</td>
                        <td>String(512)</td>
                        <td>NO</td>
                        <td>    </td>
                        <td>product info.</td>
                    </tr>
                    <tr class="pure-table-odd">
                        <td>attach</td>
                        <td>String(127)</td>
                        <td>NO</td>
                        <td> </td>
                        <td>any extra information can be added here.</td>
                    </tr>

                    <tr>
                        <td>device_id</td>
                        <td>String(32)</td>
                        <td>NO</td>
                        <td> POS001</td>
                        <td>the terminal device id from which the request is issued.</td>
                    </tr>
                </tbody>
            </table>

            <h4>-Request Example</h4>

            <code class="rainbow">

                <div>{</div>
                    <div>"appid": "mch20163",</div>
                    <div>"channel": "wechat",</div>
                    <div>"fee_type": "THB",</div>
                    <div>"img_type": "svg",</div>
                    <div>"mch_order_no": "1495773587",</div>
                    <div>"nonce_str": "sQ8gfSpeeV5Ld8ulW9q7JxUnXSOiZ90Y",</div>
                    <div>"notify_url": "http://www.yoursweb.com/notify",</div>
                    <div>"sign": "4b609e384500ba8b2ed5eddbcc3aab5c7325c45a13bb5
                        31655ac459022da0d15ead7e6ab8d73f6d1182117547a6e53871c8da44d99cf02e9d8420c9b20130a2c",</div>
                    <div>"time_stamp": "20170526113947",</div>
                    <div>"total_fee": 10,</div>
                    <div>"version": "3.0.0"</div>
                <div>}</div>
            </code>

            <h4>-SUCCESS Response Parameters</h4>
            <table class="pure-table">
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Type</th>
                        <th>Required</th>
                        <th>Example</th>
                        <th>Description</th>
                    </tr>
                </thead>

                <tbody>
                    <tr class="pure-table-odd">
                        <td>code</td>
                        <td>int</td>
                        <td>YES</td>
                        <td>0</td>
                        <td>0: it only shows the calling of the API is successful, not meaning the target business operation succeed. Non 0: Calling of the API failed, merchant can use the same parameters to launch the request again.</td>
                    </tr>

                    <tr>
                        <td>sign</td>
                        <td>String(256)</td>
                        <td>YES</td>
                        <td></td>
                        <td>refer to following relevant chapter for signature algorithm</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>result</td>
                        <td>string(16)</td>
                        <td>YES</td>
                        <td>SUCCESS</td>
                        <td>SUCCESS</td>
                    </tr>

                    <tr>
                        <td>appid</td>
                        <td>String(32)</td>
                        <td>YES</td>
                        <td> </td>
                        <td>appid is the merchant ID that authorised by Ksher</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>nonce_str</td>
                        <td>String(32)</td>
                        <td>YES</td>
                        <td>"sQ8gfSpeeV5Ld8ulW9q7JxUnXSOiZ90Y"</td>
                        <td>Random string</td>
                    </tr>

                    <tr>
                        <td>mch_order_no</td>
                        <td>String(32)</td>
                        <td>YES</td>
                        <td> </td>
                        <td>generated by merchant self, it must be unique on the merchant side.</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>ksher_order_no</td>
                        <td>String(32)</td>
                        <td>YES</td>
                        <td></td>
                        <td>generated by Ksher</td>
                    </tr>

                    <tr>
                        <td>code_url</td>
                        <td>String(64)</td>
                        <td>NO</td>
                        <td>weixin://wxpay/s/An4baqw</td>
                        <td>merchant can use this url to generate a qrcode and show it to the consumer to scan</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>imgdat</td>
                        <td>string(1024)</td>
                        <td>YES</td>
                        <td></td>
                        <td>the png format image data will be returned to the API caller unless 'svg' is requested explicitly, the png data is base64 encoded and can be assigned directly to the 'src' field of img object in the html page.</td>
                    </tr>

                    <tr>
                        <td>trade_type</td>
                        <td>string(8)</td>
                        <td>YES</td>
                        <td>NATIVE</td>
                        <td>value range: JSAP, NATIVE, APP, it should be 'NATIVE' for native pay</td>
                    </tr>

                </tbody>
            </table>
            <h4>-SUCCESS Response example</h4>
            <code class="rainbow">
                <div>{</div>
                    <div>"code": 0,</div>
                    <div>"data":</div>
                        <div> {"appid":"mch20163",</div>
                        <div> "code_url": "weixin://wxpay/bizpayurl?pr=n8F22H4",</div>
                        <div> "device_id": "",</div>
                        <div>"imgdat":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXIAAAFyAQAAAADAX2ykAAACoElEQVR4nO2aTWrkMBBGX40FWaohB+ijqG82zJFyA/soOcCAtWyQ+WYhqdOdMJMOOKY9VC0MRm/xQVE/KpWJr9j040s4OO+8884777zzf+OtWaB/zJgOALmfnTbU4/zKfJIkzbdn2QwYJEm65b9bj/Mr87lHaJqX6lXSDHaCGtMb63F+HT68+9d0LIH0cjCIAvK2epxfl3/vX0szYjqWILLx4Xb8aPqd/7d1//ZYbQ7NTzKisPTCjZMfTb/zd/GTmZkdwE45YD9nIL0GgKW2z9vqcX4lvsbvW4RqOhZEXkzkpRfh7fQ4vy5Pvfwklfaf+l1II4MgqnbS9Qo1Ppp+5+/hNeYnaYwS5ABpHgTxbNK8GMSCxg31OL8ub3Y8Wx1oTMcCsFh1chtiPfl8Y8+8RsBOsSC9tl7K7AA1nKfj2eeT++Rr/dUYr+eTNRcnlZqpNcbSuUfT7/wn1vwGtDIbJUmlN1T1QPL+apf8pX+WaqxqBtIM0kx1dzt1/+6Qb/ffyUBwNhFL0HQASy9DMQhFk134R9Pv/CfW629BmodLai43hfliHr8746/yc7dy5fM+7hjcv/vkm3/fxlTE3lVdTa28v9or39+PcihMRwEsQcTfQeShWCu9lwL8aPqdv4+PZ4McMDsMshOX+Qb0ceWmepxfk79qrcgBYJDGeLZWf+PZfP68Y/5tf7K2ziNLz8jd3ZvqcX4tvtXfNALkZ4AlQBxkRIBYnxuCttHj/Pfwl/3J9la0tIQ89U3odvqo+p2/l4/lspozqM6k5f3V/8Lr1wHaI3DuL4Wn7PtXO+Xf709WS+OCpfm5QA7Um/A2epxfl2/+bWOMAUuvobRkHM8GDKUm6W30OL8u/2F/Egq0C9HwYb394fQ777zzzjvv/B75P230m3hnLMGVAAAAAElFTkSuQmCC",</div>
                        <div> "ksher_order_no": "60020170526123947574894",</div>
                        <div>"mch_order_no": "1495773587",</div>
                        <div> "nonce_str": "sQ8gfSpeeV5Ld8ulW9q7JxUnXSOiZ90Y",</div>
                        <div> "result": "SUCCESS",</div>
                        <div>"trade_type": "NATIVE"}</div>

                        <div>"msg": "ok",</div>
                        <div>"sign": "65126acc40a48761751eb9fbabf41ca6d08a44be2a175edcaa95cc7e119c224d76d82d5776be6f80ce9a4e535469a7514d318faf5619151266532557ac0f8bd2",</div>
                        <div>"status_code": "",</div>
                        <div>"status_msg": "",</div>
                        <div>"time_stamp": "",</div>
                        <div>"version": "3.0.0"</div>
                <div>}</div>
            </code>

            <h4>-FAIL Response Parameters</h4>
            <table class="pure-table">
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Type</th>
                        <th>Required</th>
                        <th>Example</th>
                        <th>Description</th>
                    </tr>
                </thead>

                <tbody>
                    <tr class="pure-table-odd">
                        <td>code</td>
                        <td>int</td>
                        <td>YES</td>
                        <td>0</td>
                        <td>0: it only shows the calling of the API is successful, not meaning the target business operation succeed. Non 0: Calling of the API failed, merchant can use the same parameters to launch the request again.</td>
                    </tr>

                    <tr>
                        <td>sign</td>
                        <td>String(256)</td>
                        <td>YES</td>
                        <td></td>
                        <td>refer to following relevant chapter for signature algorithm</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>result</td>
                        <td>string(16)</td>
                        <td>YES</td>
                        <td>FAIL</td>
                        <td>Value range: FAIL, NOTSURE</td>
                    </tr>

                    <tr>
                        <td>err_code</td>
                        <td>String(32)</td>
                        <td>YES</td>
                        <td>SYSTEMERROR</td>
                        <td>Refer to the error list for the details</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>err_msg</td>
                        <td>String(128)</td>
                        <td>YES</td>
                        <td>system error</td>
                        <td>the detailed description of the error</td>
                    </tr>

                    <tr>
                        <td>nonce_str</td>
                        <td>String(32)</td>
                        <td>YES</td>
                        <td> "sQ8gfSpeeV5Ld8ulW9q7JxUnXSOiZ90Y"</td>
                        <td>Random string</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>ksher_order_no</td>
                        <td>String(32)</td>
                        <td>YES</td>
                        <td></td>
                        <td>generated by Ksher</td>
                    </tr>

                    <tr>
                        <td>code_url</td>
                        <td>String(64)</td>
                        <td>NO</td>
                        <td>weixin://wxpay/s/An4baqw</td>
                        <td>merchant can use this url to generate a qrcode and show it to the consumer to scan</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>imgdat</td>
                        <td>string(1024)</td>
                        <td>YES</td>
                        <td></td>
                        <td>the png format image data will be returned to the API caller unless 'svg' is requested explicitly, the png data is base64 encoded and can be assigned directly to the 'src' field of img object in the html page.</td>
                    </tr>

                    <tr>
                        <td>trade_type</td>
                        <td>string(8)</td>
                        <td>YES</td>
                        <td>NATIVE</td>
                        <td>value range: JSAP, NATIVE, APP, it should be 'NATIVE' for native pay</td>
                    </tr>

                </tbody>
            </table>

            <h4>-FAIL response example</h4>
            <div>{</div>
                <div>"code": 0,</div>
                <div>"status_code": "",</div>
                <div>"status_msg": "",</div>
                <div>"sign": '02635a1a60cfcaf461c6b860ac7ffd967c98c19803ddc4b698d2279502451f837d225fe38810357dc5e50c9de114bb40ad3513dd972f2e7db8ff08a09240c604',</div>
                <div>"version": "3.0.0",</div>
                <div>"msg": "ok",</div>
                <div>"time_stamp": "",</div>
                <div> "data":</div>
                <div>{"result": "FAIL",</div>
                <div>"err_code": "KSHER_INVALID_MCHINFO",</div>
                <div>"err_msg": "merchant not exist.",</div>
                <div>"nonce_str": ''}</div>
                <div>}</div>









        </div>

        <div class = "footer">
            <div class="pure-u-1-3">

            </div>


        </div>

    </div>
</div>

{#<script src="static/js/ui.js"></script>#}
{#<script src="{{ url_for('static', filename='js/ui.js') }}"></script>#}
<script>
  (function (window, document) {
    'use strict'

    // Enable drop-down menus in Pure
    // Inspired by YUI3 gallery-simple-menu by Julien LeComte
    // [https://github.com/yui/yui3-gallery/blob/master/src/gallery-simple-menu/js/simple-menu.js]

    function PureDropdown (dropdownParent) {

      var PREFIX = 'pure-',
        ACTIVE_CLASS_NAME = PREFIX + 'menu-active',
        ARIA_ROLE = 'role',
        ARIA_HIDDEN = 'aria-hidden',
        MENU_OPEN = 0,
        MENU_CLOSED = 1,
        MENU_PARENT_CLASS_NAME = 'pure-menu-has-children',
        MENU_ACTIVE_SELECTOR = '.pure-menu-active',
        MENU_LINK_SELECTOR = '.pure-menu-link',
        MENU_SELECTOR = '.pure-menu-children',
        DISMISS_EVENT = (window.hasOwnProperty &&
          window.hasOwnProperty('ontouchstart')) ?
          'touchstart' : 'mousedown',

        ARROW_KEYS_ENABLED = true,

        ddm = this // drop down menu

      this._state = MENU_CLOSED

      this.show = function () {
        if (this._state !== MENU_OPEN) {
          this._dropdownParent.classList.add(ACTIVE_CLASS_NAME)
          this._menu.setAttribute(ARIA_HIDDEN, false)
          this._state = MENU_OPEN
        }
      }

      this.hide = function () {
        if (this._state !== MENU_CLOSED) {
          this._dropdownParent.classList.remove(ACTIVE_CLASS_NAME)
          this._menu.setAttribute(ARIA_HIDDEN, true)
          this._link.focus()
          this._state = MENU_CLOSED
        }
      }

      this.toggle = function () {
        this[this._state === MENU_CLOSED ? 'show' : 'hide']()
      }

      this.halt = function (e) {
        e.stopPropagation()
        e.preventDefault()
      }

      this._dropdownParent = dropdownParent
      this._link = this._dropdownParent.querySelector(MENU_LINK_SELECTOR)
      this._menu = this._dropdownParent.querySelector(MENU_SELECTOR)
      this._firstMenuLink = this._menu.querySelector(MENU_LINK_SELECTOR)

      // Set ARIA attributes
      this._link.setAttribute('aria-haspopup', 'true')
      this._menu.setAttribute(ARIA_ROLE, 'menu')
      this._menu.setAttribute('aria-labelledby', this._link.getAttribute('id'))
      this._menu.setAttribute('aria-hidden', 'true');
      [].forEach.call(
        this._menu.querySelectorAll('li'),
        function (el) {
          el.setAttribute(ARIA_ROLE, 'presentation')
        }
      );
      [].forEach.call(
        this._menu.querySelectorAll('a'),
        function (el) {
          el.setAttribute(ARIA_ROLE, 'menuitem')
        }
      )

      // Toggle on click
      this._link.addEventListener('click', function (e) {
        e.stopPropagation()
        e.preventDefault()
        ddm.toggle()
      })

      // Keyboard navigation
      document.addEventListener('keydown', function (e) {
        var currentLink,
          previousSibling,
          nextSibling,
          previousLink,
          nextLink

        // if the menu isn't active, ignore
        if (ddm._state !== MENU_OPEN) {
          return
        }

        // if the menu is the parent of an open, active submenu, ignore
        if (ddm._menu.querySelector(MENU_ACTIVE_SELECTOR)) {
          return
        }

        currentLink = ddm._menu.querySelector(':focus')

        // Dismiss an open menu on ESC
        if (e.keyCode === 27) {
          /* Esc */
          ddm.halt(e)
          ddm.hide()
        }
        // Go to the next link on down arrow
        else if (ARROW_KEYS_ENABLED && e.keyCode === 40) {
          /* Down arrow */
          ddm.halt(e)
          // get the nextSibling (an LI) of the current link's LI
          nextSibling = (currentLink) ? currentLink.parentNode.nextSibling : null
          // if the nextSibling is a text node (not an element), go to the next one
          while (nextSibling && nextSibling.nodeType !== 1) {
            nextSibling = nextSibling.nextSibling
          }
          nextLink = (nextSibling) ? nextSibling.querySelector('.pure-menu-link') : null
          // if there is no currently focused link, focus the first one
          if (!currentLink) {
            ddm._menu.querySelector('.pure-menu-link').focus()
          } else if (nextLink) {
            nextLink.focus()
          }
        }
        // Go to the previous link on up arrow
        else if (ARROW_KEYS_ENABLED && e.keyCode === 38) {
          /* Up arrow */
          ddm.halt(e)
          // get the currently focused link
          previousSibling = (currentLink) ? currentLink.parentNode.previousSibling : null
          while (previousSibling && previousSibling.nodeType !== 1) {
            previousSibling = previousSibling.previousSibling
          }
          previousLink = (previousSibling) ? previousSibling.querySelector('.pure-menu-link') : null
          // if there is no currently focused link, focus the last link
          if (!currentLink) {
            ddm._menu.querySelector('.pure-menu-item:last-child .pure-menu-link').focus()
          }
          // else if there is a previous item, go to the previous item
          else if (previousLink) {
            previousLink.focus()
          }
        }
      })

      // Dismiss an open menu on outside event
      document.addEventListener(DISMISS_EVENT, function (e) {
        var target = e.target
        if (target !== ddm._link && !ddm._menu.contains(target)) {
          ddm.hide()
          ddm._link.blur()
        }
      })

    }

    function initDropdowns () {
      var dropdownParents = document.querySelectorAll('.pure-menu-has-children')
      for (var i = 0; i < dropdownParents.length; i++) {
        var ddm = new PureDropdown(dropdownParents[i])
      }
    }

    initDropdowns()

  }(this, this.document))
</script>
</body>

</html>
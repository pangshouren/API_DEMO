<!doctype html>
<html lang="en">
<head style="min-width: 150px">
    <meta charset="UTF-8">
    <meta name="description" content="A layout example with a side menu that hides on mobile, just like the Pure website.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ERROR CODES Specifications</title>

{#    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-" crossorigin="anonymous">#}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/layouts/pure-min.css') }}"
        integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous">
{#    <link rel="stylesheet" href="{{ url_for('static', filename='js/menus-min.js') }}">#}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/layouts/side-menu.css') }}">

        <!--[if lte IE 8]>
            <link rel="stylesheet" href="css/layouts/side-menu-old-ie.css">
        <![endif]-->
        <!--[if gt IE 8]><!-->
{#            <link rel="stylesheet" href="css/layouts/side-menu.css">#}

        <!--<![endif]-->
<style>
.dropdown {
  position: relative;
  display: inline-block;
}
.dropdown-content {
  display: none;
  position: absolute;
  background-color: #f9f9f9;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  padding: 12px 16px;
}
.dropdown:hover .dropdown-content {
  display: block;
}
</style>

</head>
<body>

<div id="layout">
   <!-- Menu toggle -->
    <a href="#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>

    <div style="width: 200px">
        <div id = "menu" style="overflow: unset">
        <div class="pure-menu">
            <a href="/" class="pure-menu-heading">KsherPay APIs</a>
            <div class="pure-menu custom-restricted-width">
                <ul class="pure-menu-list">
                <li class="pure-menu-item">
                <li class="pure-menu-item pure-menu-has-children">
                    <a href="#" id="menuLink1" class="pure-menu-link" aria-haspopup="true">ðŸ”–Order Request</a>
                    <ul class="pure-menu-children">
                        <li class="pure-menu-item">
                            <a href="/native_pay" class="pure-menu-link">Ksher Native_Pay API ðŸ”—</a>
                        </li>
                        <li class="pure-menu-item">
                            <a href="/quick_pay" class="pure-menu-link">Ksher Quick_Pay API ðŸ”—</a>
                        </li>
                        <li class="pure-menu-item">
                            <a href="/jsapi_pay" class="pure-menu-link">Ksher Jsapi_Pay API ðŸ”—</a>
                        </li>
                        <li class="pure-menu-item">
                            <a href="/web_alipay" class="pure-menu-link">Ksher Web_Alipay API ðŸ”—</a>
                        </li>
                        <li class="pure-menu-item">
                            <a href="/wap_alipay" class="pure-menu-link">Ksher Wap_Alipay API ðŸ”—</a>
                        </li>
                        <li class="pure-menu-item">
                            <a href="/app_pay" class="pure-menu-link">Ksher APP_Pay API ðŸ”—</a>
                        </li>
                        <li class="pure-menu-item">
                            <a href="/minipro_pay" class="pure-menu-link">Ksher Miniprogram_Pay API ðŸ”—</a>
                        </li>
                    </ul>
                </li>
                <li class="pure-menu-item"><a href="/order_query" class="pure-menu-link">Order Query</a></li>
                <li class="pure-menu-item"><a href="/order_close" class="pure-menu-link">Order Close</a></li>
                <li class="pure-menu-item"><a href="/order_refund" class="pure-menu-link">Order Refund</a></li>
                <li class="pure-menu-item"><a href="/refund_query" class="pure-menu-link">Refund Query</a></li>
                <li class="pure-menu-item"><a href="/rate_query" class="pure-menu-link">Rate Query</a></li>
                <li class="pure-menu-item"><a href="pay_notify" class="pure-menu-link">Pay Notify</a></li>
                <li class="pure-menu-item"><a href="/error_codes" class="pure-menu-link">ERROR CODES</a></li>
                <li class="pure-menu-item"><a href="/for_test" class="pure-menu-link">For Test</a></li>
            </ul>
            </div>

        </div>
    </div>
    </div>










    <div id = "main" >
        <div class="header">
            <h3>ERROR CODES Specifications</h3>

        </div>

        <div class="content">

            <h3></h3>


            <table class="pure-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Reason</th>
                        <th>Solution</th>
                    </tr>
                </thead>
                <tbody>

                    <tr class="pure-table-odd">
                        <td>APPID_NOT_EXIST</td>
                        <td>APPID not exist</td>
                        <td>APPID was absent in parameters.</td>
                        <td>please check if the APPID is correct.</td>
                    </tr>

                     <tr>
                        <td>APPID_MCHID_NOT_MATCH</td>
                        <td>APPID and MCHID not match</td>
                        <td>APPID and MCHID not match</td>
                        <td>please check if the APPID and mchid match.</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>INVALID_ORDER_NO</td>
                        <td>invalid order no.</td>
                        <td>order no. passed in is not correct.</td>
                        <td>parameter error, please check if the original order no. passed in exist or if the original order is failed.</td>
                    </tr>

                    <tr>
                        <td>KSHER_SIGN_ERROR</td>
                        <td>signature error</td>
                        <td>merchant signature is not correct</td>
                        <td>check the signature parameter</td>

                    </tr>
                    <tr class="pure-table-odd">
                        <td>KSHER_SYSTEMERROR</td>
                        <td>Error occurred during handling the request.</td>
                        <td>Error occurred during handling the request.</td>
                        <td>Issue the refund request again.</td>
                    </tr>

                     <tr>
                        <td>KSHER_VERSION_ERROR</td>
                        <td>API version used by merchant is not compatible with the API of the vendor</td>
                        <td>API version used does not match</td>
                        <td>contact the vendor to confirm current API version</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>KSHER_ERROR_ORDER_NO</td>
                        <td>Missing order no parameter</td>
                        <td>Missing order no parameter</td>
                        <td>Check the order no.(mch_order_no, ksher_order_no, channel_order_no)</td>
                    </tr>

                    <tr>
                        <td>KSHER_REFUND_EXPIRE</td>
                        <td>Refund can not be made via API by merchant after the order already settled.</td>
                        <td>Refund can not be made via API by merchant after the order already settled.</td>
                        <td>Please submit refund request on the Ksher merchant platform.</td>
                    </tr>

                    <tr  class="pure-table-odd">
                        <td>KSHER_INVALID_MCHINFO</td>
                        <td>merchant information is not correct</td>
                        <td>the appid passed in does not exist in the vendor's system</td>
                        <td>confirm if the appid passed in is correct, contact the vendor if needed.</td>
                    </tr>

                    <tr>
                        <td>KSHER_INVALID_ORDER_NO</td>
                        <td>order no. does not exist</td>
                        <td>the order no. passed in cannot be found in vendor's system</td>
                        <td>check if the order no. passed in is correct</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>KSHER_INVALID_REFUND_FEE</td>
                        <td>invalid amount to refund </td>
                        <td>amount to refund is greater than the available amount</td>
                        <td>check if the amount to refund is correct</td>
                    </tr>

                    <tr>
                        <td>KSHER_INVALID_REFUND_AMOUNT</td>
                        <td>Partially refund is not allowed</td>
                        <td>Partially refund is not allowed</td>
                        <td>refund completely is allowed.</td>
                    </tr>
                    <tr class="pure-table-odd">
                        <td>KSHER_INVALID_REFUND_BALANCE</td>
                        <td>The balance amount of this order(price fee minus amount already refunded.) is not enough for the amount to refund. </td>
                        <td>The balance amount of this order(price fee minus amount already refunded.) is not enough for the amount to refund.</td>
                        <td>Check the amount to refund.</td>
                    </tr>

                    <tr>
                        <td>KSHER_INVALID_REFUND_ORDER_NO</td>
                        <td>invalid refund order no.</td>
                        <td>the refund order no. passed already used.</td>
                        <td>check if the refund order no. passed in, use a new one.</td>
                    </tr>
                    <tr class="pure-table-odd">
                        <td>KSHER_INVALID_REFUND_FEE_OR_TYPE</td>
                        <td>Refund currency or amount invalid</td>
                        <td>Refund currency or amount invalid</td>
                        <td>Check the currcency or amount to refund.</td>
                    </tr>

                    <tr>
                        <td>KSHER_PARAM_OVERLENGTH </td>
                        <td>Some parameters are too long.</td>
                        <td>Some paramters are too long</td>
                        <td>Check the parameters.</td>
                    </tr>
                    <tr class="pure-table-odd">
                        <td>KSHER_INVALID_PARAM </td>
                        <td>Missing parameter(s)</td>
                        <td>Some parameter(s) invalid</td>
                        <td>Check parameter(s)</td>
                    </tr>

                    <tr>
                        <td>KSHER_DUPLICATED_ORDERNO</td>
                        <td>The merchant order no already used.</td>
                        <td>The merchant order no already used.</td>
                        <td>Use a new order no to make the order again.</td>
                    </tr>

                     <tr class="pure-table-odd">
                        <td>KSHER_EXCEED_AMOUNT_LIMIT</td>
                        <td>the amount to pay exceeds the amount limit configured</td>
                        <td>the amount to pay exceeds the amount limit configured</td>
                        <td>make sure if the amount to pay exceeds the limit. </td>
                    </tr>

                    <tr>
                        <td>KSHER_FEETYPE_NOT_MATCH </td>
                        <td>fee type does not match</td>
                        <td>pricing fee type does not match the registered fee type</td>
                        <td>merchant needs to modify the program, if merchant is sure that the fee type passed in is correct, contact the vendor.</td>
                    </tr>
                    <tr class="pure-table-odd">
                        <td>KSHER_DUPLICATED_ORDERNO</td>
                        <td>The merchant order no already used.</td>
                        <td>The merchant order no already used.</td>
                        <td>Use a new order no to make the order again.</td>
                    </tr>

                    <tr>
                        <td>KSHER_DUPLICATED_REFUND_ORDERNO</td>
                        <td>invalid refund order no</td>
                        <td>the refund order no. passed already used.</td>
                        <td>check if the refund order no. passed in, use a new one. </td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>KSHER_AMOUNT_IS_TOO_SMALL</td>
                        <td>The amount is too small.</td>
                        <td>The amount is too small</td>
                        <td> Pass in a larger amount</td>
                    </tr>

                    <tr>
                        <td>KSHER_CHANNEL_RESPONSE_ERROR</td>
                        <td>Error occurred during query operation</td>
                        <td>Error occurred during query operation</td>
                        <td>Make an order query again.</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>LACK_PARAMS</td>
                        <td>parameter absent</td>
                        <td>mandatory parameter(s) was absent</td>
                        <td>please check if the parameters were sufficient </td>
                    </tr>

                    <tr>
                        <td>MCHID_NOT_EXIST</td>
                        <td>MCHID not exist</td>
                        <td>MCHID was absent in parameters.</td>
                        <td>please check if the MCHID is correct. </td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>NOAUTH</td>
                        <td>the merchant has no access to this interface.</td>
                        <td>the merchant has not yet got the access to this interface.</td>
                        <td>contact the vendor(Ksher) </td>
                    </tr>

                    <tr>
                        <td>NOT_UTF8</td>
                        <td>coding format error</td>
                        <td>required coding format was not used.</td>
                        <td>please use UTF-8 coding</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>NOTENOUGH</td>
                        <td>Not enough unsettled fund for refund</td>
                        <td>There is not enough unsettled fund for refund</td>
                        <td>This error code means refund request failed due to not enough unsettled fund for refund.Merchants need to contact Ksher to authorise credit for this kind of situation. If unsettled fund is enough ,please call the refund API once there is enough unsettled fund, or retry it continuously. </td>
                    </tr>

                    <tr>
                        <td>ORDERPAID</td>
                        <td>the order is already paid. </td>
                        <td>the order no was used repetitively.</td>
                        <td>Cplease check whether an used order no. was used repetitively. if this is a new order, please use an unused order no. </td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>ORDERCLOSED</td>
                        <td>order closed already</td>
                        <td>the order closed already.</td>
                        <td>the order no. is already closed, please launch a new order. </td>
                    </tr>

                    <tr>
                        <td>ORDERNOTEXISTR</td>
                        <td>the order no. does not exist</td>
                        <td>the order does not exist in the system</td>
                        <td>merchant need to check if the order no. is correct.</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>OUT_TRADE_NO_USED</td>
                        <td>repetitive out_trade_no</td>
                        <td>the same order cannot be submitted for multi times.</td>
                        <td>please verify whether the out_trade_no. was submitted repetitively </td>
                    </tr>

                     <tr>
                        <td>PARAM_ERROR</td>
                        <td>parameters error </td>
                        <td>parameters requested are not correct</td>
                        <td>check the application according to the information returned, contact the vendor if needed.</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>POST_DATA_EMPTY</td>
                        <td>post parameters are empty</td>
                        <td>post parameters should not be empty</td>
                        <td>please check the paremeters posted in the http request.</td>
                    </tr>

                    <tr>
                        <td>REQUIRE_POST_METHOD</td>
                        <td>please use POST method</td>
                        <td>the method used to pass the parameters was not POST.</td>
                        <td>please check if the parameters was passed by POST method</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>SYSTEMERROR</td>
                        <td>system error</td>
                        <td>system timeout</td>
                        <td> call the order query API immediately to check order status, and decide next step according to the status of the order</td>
                    </tr>

                       <tr>
                        <td>SIGNERROR</td>
                        <td>signature error</td>
                        <td>the signature parameter is not correct</td>
                        <td>please check if the signature parameter and method meet the requirements of signature algorithm</td>
                    </tr>

                    <tr class="pure-table-odd">
                        <td>TRADE_STATE_ERROR</td>
                        <td></td>
                        <td>order state error</td>
                        <td>there will be latency for the result for refund application, please query later(20 minutes for balance payment, 3 workdays for card payment)</td>
                    </tr>

                    <tr>
                        <td>USER_ACCOUNT_ABNORMALE</td>
                        <td>refund failed</td>
                        <td>user account is exceptional or unregistered.</td>
                        <td>this status stands for the failure of the refund operation, merchant can handle the refund by himself.</td>

                    </tr>

                    <tr class="pure-table-odd">
                        <td>XML_FORMAT_ERROR</td>
                        <td>XML format error/td>
                        <td>XML format error</td>
                        <td> please check whether the format of XML parameters is correct.</td>
                    </tr>
                </tbody>
            </table>

                </tbody>
            </table>
        </div>

        <div class = "footer">
            <div class="pure-u-1-3">

            </div>


        </div>

    </div>
</div>

{#<script src="static/js/ui.js"></script>#}
{#<script src="{{ url_for('static', filename='js/ui.js') }}"></script>#}
<script>
  (function (window, document) {
    'use strict'

    // Enable drop-down menus in Pure
    // Inspired by YUI3 gallery-simple-menu by Julien LeComte
    // [https://github.com/yui/yui3-gallery/blob/master/src/gallery-simple-menu/js/simple-menu.js]

    function PureDropdown (dropdownParent) {

      var PREFIX = 'pure-',
        ACTIVE_CLASS_NAME = PREFIX + 'menu-active',
        ARIA_ROLE = 'role',
        ARIA_HIDDEN = 'aria-hidden',
        MENU_OPEN = 0,
        MENU_CLOSED = 1,
        MENU_PARENT_CLASS_NAME = 'pure-menu-has-children',
        MENU_ACTIVE_SELECTOR = '.pure-menu-active',
        MENU_LINK_SELECTOR = '.pure-menu-link',
        MENU_SELECTOR = '.pure-menu-children',
        DISMISS_EVENT = (window.hasOwnProperty &&
          window.hasOwnProperty('ontouchstart')) ?
          'touchstart' : 'mousedown',

        ARROW_KEYS_ENABLED = true,

        ddm = this // drop down menu

      this._state = MENU_CLOSED

      this.show = function () {
        if (this._state !== MENU_OPEN) {
          this._dropdownParent.classList.add(ACTIVE_CLASS_NAME)
          this._menu.setAttribute(ARIA_HIDDEN, false)
          this._state = MENU_OPEN
        }
      }

      this.hide = function () {
        if (this._state !== MENU_CLOSED) {
          this._dropdownParent.classList.remove(ACTIVE_CLASS_NAME)
          this._menu.setAttribute(ARIA_HIDDEN, true)
          this._link.focus()
          this._state = MENU_CLOSED
        }
      }

      this.toggle = function () {
        this[this._state === MENU_CLOSED ? 'show' : 'hide']()
      }

      this.halt = function (e) {
        e.stopPropagation()
        e.preventDefault()
      }

      this._dropdownParent = dropdownParent
      this._link = this._dropdownParent.querySelector(MENU_LINK_SELECTOR)
      this._menu = this._dropdownParent.querySelector(MENU_SELECTOR)
      this._firstMenuLink = this._menu.querySelector(MENU_LINK_SELECTOR)

      // Set ARIA attributes
      this._link.setAttribute('aria-haspopup', 'true')
      this._menu.setAttribute(ARIA_ROLE, 'menu')
      this._menu.setAttribute('aria-labelledby', this._link.getAttribute('id'))
      this._menu.setAttribute('aria-hidden', 'true');
      [].forEach.call(
        this._menu.querySelectorAll('li'),
        function (el) {
          el.setAttribute(ARIA_ROLE, 'presentation')
        }
      );
      [].forEach.call(
        this._menu.querySelectorAll('a'),
        function (el) {
          el.setAttribute(ARIA_ROLE, 'menuitem')
        }
      )

      // Toggle on click
      this._link.addEventListener('click', function (e) {
        e.stopPropagation()
        e.preventDefault()
        ddm.toggle()
      })

      // Keyboard navigation
      document.addEventListener('keydown', function (e) {
        var currentLink,
          previousSibling,
          nextSibling,
          previousLink,
          nextLink

        // if the menu isn't active, ignore
        if (ddm._state !== MENU_OPEN) {
          return
        }

        // if the menu is the parent of an open, active submenu, ignore
        if (ddm._menu.querySelector(MENU_ACTIVE_SELECTOR)) {
          return
        }

        currentLink = ddm._menu.querySelector(':focus')

        // Dismiss an open menu on ESC
        if (e.keyCode === 27) {
          /* Esc */
          ddm.halt(e)
          ddm.hide()
        }
        // Go to the next link on down arrow
        else if (ARROW_KEYS_ENABLED && e.keyCode === 40) {
          /* Down arrow */
          ddm.halt(e)
          // get the nextSibling (an LI) of the current link's LI
          nextSibling = (currentLink) ? currentLink.parentNode.nextSibling : null
          // if the nextSibling is a text node (not an element), go to the next one
          while (nextSibling && nextSibling.nodeType !== 1) {
            nextSibling = nextSibling.nextSibling
          }
          nextLink = (nextSibling) ? nextSibling.querySelector('.pure-menu-link') : null
          // if there is no currently focused link, focus the first one
          if (!currentLink) {
            ddm._menu.querySelector('.pure-menu-link').focus()
          } else if (nextLink) {
            nextLink.focus()
          }
        }
        // Go to the previous link on up arrow
        else if (ARROW_KEYS_ENABLED && e.keyCode === 38) {
          /* Up arrow */
          ddm.halt(e)
          // get the currently focused link
          previousSibling = (currentLink) ? currentLink.parentNode.previousSibling : null
          while (previousSibling && previousSibling.nodeType !== 1) {
            previousSibling = previousSibling.previousSibling
          }
          previousLink = (previousSibling) ? previousSibling.querySelector('.pure-menu-link') : null
          // if there is no currently focused link, focus the last link
          if (!currentLink) {
            ddm._menu.querySelector('.pure-menu-item:last-child .pure-menu-link').focus()
          }
          // else if there is a previous item, go to the previous item
          else if (previousLink) {
            previousLink.focus()
          }
        }
      })

      // Dismiss an open menu on outside event
      document.addEventListener(DISMISS_EVENT, function (e) {
        var target = e.target
        if (target !== ddm._link && !ddm._menu.contains(target)) {
          ddm.hide()
          ddm._link.blur()
        }
      })

    }

    function initDropdowns () {
      var dropdownParents = document.querySelectorAll('.pure-menu-has-children')
      for (var i = 0; i < dropdownParents.length; i++) {
        var ddm = new PureDropdown(dropdownParents[i])
      }
    }

    initDropdowns()

  }(this, this.document))
</script>
</body>

